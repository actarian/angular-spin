<div class="top-header"><img src="assets/img/top.png" alt=""></div>
<header class="header" [ngClass]="{'nav-active': navToggle}">
	<div class="container">
		<a [routerLink]="'homepage' | slugAsync" class="logo">
			<img src="assets/img/logo-eurospin-viaggi.png" alt="Logo Eurospin Viaggi">
		</a>
		<div class="desktop-navbar">
			<ul class="navbar-nav">
				<li class="nav-item" *ngFor="let item of menu;">
					<a class="nav-link" [routerLink]="[item.slug]" (click)="subnavActive = null" *ngIf="!item.items?.length">{{item.name}}</a>
					<button class="btn--link nav-link" type="button" [ngClass]="{'active': subnavActive == item}" (click)="subnavActive = (subnavActive == item ? null : item)" *ngIf="item.items?.length">{{item.name}}</button>
				</li>
			</ul>
			<div class="navbar-actions" *ngIf="!(userService.user$ | async)">
				<button type="button" class="btn btn--tertiary" (click)="onSign()">{{ 'header.signIn' | translate }}</button>
			</div>
			<div class="navbar-actions" *ngIf="(userService.user$ | async)">
				<a class="navbar-ico" [routerLink]="['/area_riservata/preferiti']" routerLinkActive="active">
					<svg class="ico ico-fav">
						<use xlink:href="#ico-fav"></use>
					</svg>
					<span *ngIf="wishlist.count > 0" class="fav-num">{{wishlist.count}}</span>
				</a>
				<a class="navbar-ico" [routerLink]="['/area_riservata/i_tuoi_dati']" routerLinkActive="active">
					<svg class="ico ico-user">
						<use xlink:href="#ico-user"></use>
					</svg>
				</a>
			</div>
		</div>
		<div class="mobile-navbar">
			<div class="nav-item">
				<a href="">
					<svg class="ico">
						<use xlink:href="#ico-tel"></use>
					</svg><span>Chiama</span>
				</a>
			</div>
			<div class="nav-item" *ngIf="!(userService.user$ | async)">
				<button type="button" (click)="onSign()">
					<svg class="ico">
						<use xlink:href="#ico-user"></use>
					</svg><span>{{ 'header.signIn' | label }}</span>
				</button>
			</div>
			<div class="nav-item" *ngIf="(userService.user$ | async)">
				<a [routerLink]="['/area_riservata/preferiti']" routerLinkActive="active">
					<span *ngIf="wishlist.count > 0" class="fav-num">{{wishlist.count}}</span>
					<svg class="ico ico-fav">
						<use xlink:href="#ico-fav"></use>
					</svg><span>Preferiti</span>
				</a>
			</div>
			<div class="nav-item" *ngIf="(userService.user$ | async)">
				<a [routerLink]="['/area_riservata/i_tuoi_dati']" routerLinkActive="active">
					<svg class="ico ico-user">
						<use xlink:href="#ico-user"></use>
					</svg><span>Profilo</span>
				</a>
			</div>
			<div class="nav-item">
				<button class="nav-toggle" (click)="navToggle = !navToggle">
					<div class="nav-toggle--bars">
						<span></span>
						<span></span>
						<span></span>
					</div>
					<span>Menu</span>
				</button>
			</div>
		</div>
	</div>

	<ng-container *ngFor="let item of menu; let index = index">
		<div class="subnav subnav-{{index}}" *ngIf="subnavActive == item && item.items?.length">
			<button class="subnav-close" (click)="subnavActive = null">
				<svg class="ico"><use xlink:href="#ico-prev"></use></svg>
				indietro
			</button>
			<div class="container">
				<ng-container *ngIf="item.items?.length > 3">
					<div class="subnav-col">
						<ul>
							<li *ngFor="let row of item.items"><a [href]="row.slug">{{row.name}}</a></li>
						</ul>
					</div>
				</ng-container>
				<ng-container *ngIf="item.items?.length <= 3">
					<div class="subnav-col" *ngFor="let col of item.items">
						<h3>{{col.name}}</h3>
						<ul>
							<li *ngFor="let row of col.items"><a [href]="row.slug">{{row.name}}</a></li>
						</ul>
					</div>
				</ng-container>
			</div>
		</div>
	</ng-container>

</header>
